(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(16),o=n.n(i),c=(n(76),n(39)),l=n.n(c),s=n(56),u=n(21),m=n(40),d=n(67),p=n(69),g=n(22),v=n(2),h=n(66),w=n(68),f=n(8),b=n(60),E=n(57),O=null,j=function(e){var t=e.token;return O=t},k=Object(E.a)(function(e,t){var n=t.headers,a=O;return{headers:Object(p.a)({},n,{authorization:a?"Bearer ".concat(a):""})}}),S=Object(f.d)(function(e){var t=e.query,n=Object(v.k)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r},new b.a({uri:"wss://subscriptions.graph.cool/v1/cjhdp4tzl2r890195ggdfyv2h",options:{reconnect:!0}}),new h.a({uri:"https://api.graph.cool/simple/v1/cjhdp4tzl2r890195ggdfyv2h"})),$=new g.a({link:k.concat(S),cache:new w.a}),y=n(123),U=n(122),x=n(125),C=n(124),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],i=n[1];return{value:r,onChange:function(e){return i(e.target.value)}}},L=function(e){var t=e.handleLogin,n=Object(a.useState)(!0),i=Object(u.a)(n,2),o=i[0],c=i[1],l=N(),s=N(),m=N();return r.a.createElement(y.a.Dialog,null,r.a.createElement(y.a.Body,null,r.a.createElement("div",{className:"login-logo-container"},r.a.createElement("h1",null,"Chatable"),r.a.createElement("h5",null,"Create a user or use 'test/test' for signin")),r.a.createElement("div",{className:"login-title-container"},r.a.createElement("span",{className:"login-title-text"},o?"Login":"Sign Up")),r.a.createElement(U.a,null,!o&&r.a.createElement(x.a,Object.assign({autoFocus:!0,type:"text",placeholder:"Your name (to be used in chat)"},s)),r.a.createElement(x.a,Object.assign({autoFocus:!0,type:"email",placeholder:"Email"},l)),r.a.createElement(x.a,Object.assign({type:"password",placeholder:"Password"},m))),r.a.createElement(U.a,null,r.a.createElement(C.a,{className:"pointer",onClick:function(){return c(!o)}},o?"Don't have an account? Sign up":"Have an account? Log in"),r.a.createElement(C.a,{className:"pull-right pointer",onClick:function(){return t({name:s.value,email:l.value,password:m.value})}},o?"Login":"Create User"))))},B=n(42),z=n.n(B);n(117);function D(){var e=Object(m.a)(["\n\tmutation login($email: String!, $password: String!) {\n\t\tsigninUser(email: { email: $email, password: $password }) {\n\t\t\ttoken\n\t\t\tuser {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\temail\n\t\t\t}\n\t\t}\n\t}\n"]);return D=function(){return e},e}function F(){var e=Object(m.a)(["\n\tmutation createUserAndSignOn($name: String!, $email: String!, $password: String!) {\n\t\tcreateUser(name: $name, authProvider: { email: { email: $email, password: $password } }) {\n\t\t\tid\n\t\t}\n\t\tsigninUser(email: { email: $email, password: $password }) {\n\t\t\ttoken\n\t\t\tuser {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\temail\n\t\t\t}\n\t\t}\n\t}\n"]);return F=function(){return e},e}var J=z()(F()),P=z()(D()),W=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(),c=Object(u.a)(o,2),m=c[0],p=c[1],g=function(){var e=Object(s.a)(l.a.mark(function e(t){var n,a,r,o,c,s,u,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.email,r=t.password,p(null),i(null),e.prev=3,e.next=6,$.mutate({mutation:""===n?P:J,variables:{name:n,email:a,password:r}});case 6:o=e.sent,c=o.data,s=(void 0===c?{}:c).signinUser,m=(u=void 0===s?{}:s).token,j(void 0===m?"":m),i(u),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),p(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[3,14]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,{client:$},r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{handleLogin:g}),n&&r.a.createElement("div",null,JSON.stringify(n)),m&&r.a.createElement("div",null,m)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,n){e.exports=n(120)},76:function(e,t,n){}},[[71,1,2]]]);
//# sourceMappingURL=main.66c0d1eb.chunk.js.map