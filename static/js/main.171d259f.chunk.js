(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},175:function(e,t,n){},177:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),l=n.n(o),i=(n(100),n(57)),c=n.n(i),s=n(79),u=n(22),m=n(28),d=n(42),p=n(91),g=n(23),v=n(3),h=n(90),E=n(92),f=n(12),b=n(83),w=n(80),O=null,j=function(e){var t=e.token;return O=t},k=Object(w.a)(function(e,t){var n=t.headers,a=O;return{headers:Object(p.a)({},n,{authorization:a?"Bearer ".concat(a):""})}}),y=Object(f.d)(function(e){var t=e.query,n=Object(v.k)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r},new b.a({uri:"wss://subscriptions.graph.cool/v1/cjhdp4tzl2r890195ggdfyv2h",options:{reconnect:!0}}),new h.a({uri:"https://api.graph.cool/simple/v1/cjhdp4tzl2r890195ggdfyv2h"})),S=new g.a({link:k.concat(y),cache:new E.a}),$=n(180),N=n(183),x=n(181),L=n(182),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],o=n[1];return{value:r,onChange:function(e){return o(e.target.value)}}},U=function(e){var t=e.handleLogin,n=Object(a.useState)(!0),o=Object(u.a)(n,2),l=o[0],i=o[1],c=C(),s=C(),m=C();return r.a.createElement($.a.Dialog,null,r.a.createElement($.a.Body,null,r.a.createElement("div",{className:"login-logo-container"},r.a.createElement("h1",null,"Chatable"),r.a.createElement("h5",null,"Create a user or use 'test/test' for signin")),r.a.createElement("div",{className:"login-title-container"},r.a.createElement("span",{className:"login-title-text"},l?"Login":"Sign Up")),r.a.createElement(N.a,null,!l&&r.a.createElement(x.a,Object.assign({autoFocus:!0,type:"text",placeholder:"Your name (to be used in chat)"},s)),r.a.createElement(x.a,Object.assign({autoFocus:!0,type:"email",placeholder:"Email"},c)),r.a.createElement(x.a,Object.assign({type:"password",placeholder:"Password"},m))),r.a.createElement(N.a,null,r.a.createElement(L.a,{className:"pointer",onClick:function(){return i(!l)}},l?"Don't have an account? Sign up":"Have an account? Log in"),r.a.createElement(L.a,{className:"pull-right pointer",onClick:function(){return t({name:s.value,email:c.value,password:m.value})}},l?"Login":"Create User"))))},B=n(31),F=n.n(B);n(175);function J(){var e=Object(m.a)(["\n\t{\n\t\tallGroups(orderBy: name_ASC) {\n\t\t\tid\n\t\t\tname\n\t\t\tdescription\n\t\t}\n\t}\n"]);return J=function(){return e},e}var z=F()(J()),D=function(){return r.a.createElement(d.b,{query:z},function(e){var t=e.loading,n=e.error,a=e.data;return t?r.a.createElement("p",null,"Loading..."):n?r.a.createElement("p",null,"Error :( ",JSON.stringify(n)):r.a.createElement("ul",{style:{color:"white"}},a.allGroups.map(function(e){return r.a.createElement("li",null,e.name," ",r.a.createElement("br",null),"[",e.id,"]")}))})},q=function(e){var t=e.user,n=e.handleLogout;return r.a.createElement("div",{className:"app-layout"},r.a.createElement("div",{className:"channels box"},r.a.createElement("div",null," List channels "),r.a.createElement(D,null)),r.a.createElement("div",{className:"header"},JSON.stringify(t)," ",r.a.createElement("button",{onClick:n},"Logout")),r.a.createElement("div",{className:"messages box scroll-container"},"Chat entries here"),r.a.createElement("div",{className:"input box"},r.a.createElement(x.a,{type:"text",placeholder:"Type to talk...",autoFocus:!0})))};n(177);function A(){var e=Object(m.a)(["\n\tmutation login($email: String!, $password: String!) {\n\t\tsigninUser(email: { email: $email, password: $password }) {\n\t\t\ttoken\n\t\t\tuser {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\temail\n\t\t\t}\n\t\t}\n\t}\n"]);return A=function(){return e},e}function G(){var e=Object(m.a)(["\n\tmutation createUserAndSignOn($name: String!, $email: String!, $password: String!) {\n\t\tcreateUser(name: $name, authProvider: { email: { email: $email, password: $password } }) {\n\t\t\tid\n\t\t}\n\t\tsigninUser(email: { email: $email, password: $password }) {\n\t\t\ttoken\n\t\t\tuser {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\temail\n\t\t\t}\n\t\t}\n\t}\n"]);return G=function(){return e},e}var P=F()(G()),W=F()(A()),H=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(),i=Object(u.a)(l,2),m=i[0],p=i[1],g=function(){var e=Object(s.a)(c.a.mark(function e(t){var n,a,r,l,i,s,u,m;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.email,r=t.password,p(null),o(null),e.prev=3,e.next=6,S.mutate({mutation:""===n?W:P,variables:{name:n,email:a,password:r}});case 6:l=e.sent,i=l.data,s=(void 0===i?{}:i).signinUser,m=(u=void 0===s?{}:s).token,j(void 0===m?"":m),o(u),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),p(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[3,14]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,{client:S},r.a.createElement(r.a.Fragment,null,n?r.a.createElement(q,{user:n,handleLogout:function(){o(void 0),j({token:null}),S.resetStore()}}):r.a.createElement(U,{handleLogin:g}),m&&r.a.createElement("div",null,m)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},95:function(e,t,n){e.exports=n(179)}},[[95,1,2]]]);
//# sourceMappingURL=main.171d259f.chunk.js.map